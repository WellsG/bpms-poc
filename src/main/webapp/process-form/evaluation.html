<html>
<head>
<script src="../common.js"></script>
</head>
<body>
<div id="successalert" class="alert alert-success" role="alert" hidden="hidden">

</div>
<h4>Evaluation Process</h4>
<form id="evaform" class="form-horizontal" method="POST" action="../process">
  <div class="form-group">
    <label class="col-sm-1 control-label" for="employee">Employee:</label>
    <div class="col-sm-4">
      <input type="text" id="employee" name="employee" class="form-control">
    </div>
  </div>
  <div class="form-group">
    <label class="col-sm-1 control-label" for="reason">Reason:</label>
    <div class="col-sm-4">
      <input type="text" id="reason" name="reason" class="form-control">
    </div>
  </div>
  
  <!-- hidden process info -->
  <input type="hidden" name="deploymentId" value="org.jbpm:evaluation:2.1"/>
  <input type="hidden" name="processDefId" value="evaluation"/>
</form>
<p>
<button class="btn btn-primary" style="margin-left:550px;" id="evastart" type="button">Start Process</button>
</p>

<script>
$('#evastart').click(function () {
	//$('#evaform').submit();
	$("#evastart").attr("disabled", "disabled");
	$.ajax({
	    url : '../process',
	    dataType : 'json',
	    type: 'POST',
	    data : $('#evaform').serialize(),
	    success : function (data) {
	    	$("#successalert").append("Start successfully! Process Id: #" + data.id + ". Go to <a href='../index2.html' class='alert-link'>home page</a>");
	    	$("#successalert").fadeIn(500);
	        $("#evastart").removeAttr("disabled");
	    }
	});
});

</script>
</body>
</html>